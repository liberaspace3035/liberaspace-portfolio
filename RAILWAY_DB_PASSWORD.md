# Railwayデータベースパスワードについて

## パスワードの設定タイミング

### 自動生成されるタイミング

RailwayでMySQLデータベースサービスを追加すると、**自動的にパスワードが生成**されます。

1. Railwayダッシュボードで「+ New」をクリック
2. 「Database」→「Add MySQL」を選択
3. データベースサービスが作成される
4. **この時点で、パスワードが自動生成されます**

### パスワードの確認方法

1. Railwayダッシュボードで**データベースサービス（MySQL）**を開く
2. 「Variables」タブを開く
3. 以下の環境変数が自動生成されています：
   - `MYSQLHOST` - データベースホスト名
   - `MYSQLPORT` - ポート番号（通常3306）
   - `MYSQLDATABASE` - データベース名
   - `MYSQLUSER` - ユーザー名（通常`root`）
   - `MYSQLPASSWORD` - **自動生成されたパスワード**（これが重要！）

### パスワードの特徴

- **自動生成**: Railwayがランダムに生成します
- **安全**: 強力なランダムパスワードです
- **変更可能**: 後から変更することも可能ですが、通常は変更不要です
- **表示**: 「Variables」タブで確認できます（目のアイコンをクリックして表示）

## アプリケーションでの使用方法

### 環境変数の設定

アプリケーションサービスの「Variables」タブで、データベースサービスの`MYSQLPASSWORD`の値を`DB_PASSWORD`に設定します：

1. **データベースサービス**の「Variables」タブで`MYSQLPASSWORD`の値を確認（コピー）
2. **アプリケーションサービス**の「Variables」タブを開く
3. `DB_PASSWORD`を探す（または新規作成）
4. **Variable**: `DB_PASSWORD`
5. **Value**: データベースサービスの`MYSQLPASSWORD`の値を**直接入力**（コピー＆ペースト）
6. 「Save」をクリック

### 重要な注意事項

- **自動変数参照は使わない**: `${{MySQL.MYSQLPASSWORD}}`のような形式は使わず、**直接値を入力**してください
- **パスワードは安全に管理**: パスワードは機密情報なので、Gitにコミットしないでください
- **環境変数で管理**: Railwayダッシュボードの「Variables」タブで管理します

## パスワードを変更する場合

### 方法1: Railwayダッシュボードで変更

1. データベースサービスの「Variables」タブを開く
2. `MYSQLPASSWORD`を編集
3. 新しいパスワードを設定
4. アプリケーションサービスの`DB_PASSWORD`も同じ値に更新

### 方法2: MySQLコマンドで変更

Railwayダッシュボードのターミナルで：

```bash
mysql -u root -p
# 現在のパスワードを入力

ALTER USER 'root'@'%' IDENTIFIED BY 'new_password';
FLUSH PRIVILEGES;
```

その後、アプリケーションサービスの`DB_PASSWORD`も更新してください。

## よくある質問

### Q: パスワードを忘れた場合は？

A: Railwayダッシュボードのデータベースサービスの「Variables」タブで確認できます。

### Q: パスワードはどこに保存されていますか？

A: Railwayの環境変数として保存されています。Gitにはコミットされません。

### Q: パスワードを変更したらどうなりますか？

A: アプリケーションサービスの`DB_PASSWORD`も同じ値に更新する必要があります。更新しないと、データベース接続エラーが発生します。

### Q: パスワードは自動的に変更されますか？

A: いいえ。一度生成されたパスワードは、手動で変更しない限り変更されません。



