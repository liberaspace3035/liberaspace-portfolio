# Railwayヘルスチェックのトラブルシューティング

## 現在のエラー

ヘルスチェックが失敗しています。`/health`エンドポイントが応答していません。

## 確認事項

### 1. アプリケーションが起動しているか

Railwayダッシュボードの「Logs」タブで以下を確認：

- アプリケーションが正常に起動しているか
- エラーメッセージがないか
- `php artisan serve`が実行されているか

### 2. 利用可能なヘルスチェックエンドポイント

現在、以下のエンドポイントが利用可能です：

- `/health` - カスタムエンドポイント（データベース接続不要）
- `/up` - Laravel 12のデフォルトヘルスチェック

### 3. ヘルスチェックパスの変更

`railway.toml`で`/up`を使用するように変更しました。これがLaravelの標準ヘルスチェックエンドポイントです。

## 解決方法

### 方法1: `/up`エンドポイントを使用（推奨）

`railway.toml`で`healthcheckPath = "/up"`に設定しました。これはLaravel 12の標準ヘルスチェックエンドポイントです。

### 方法2: アプリケーションの起動を確認

Railwayダッシュボードの「Logs」タブで、以下のようなメッセージが表示されているか確認：

```
INFO  Server running on [http://0.0.0.0:PORT]
```

### 方法3: ポート番号の確認

`$PORT`環境変数が正しく設定されているか確認してください。Railwayは自動的に設定しますが、確認が必要な場合があります。

## デバッグ手順

1. **ログを確認**
   - Railwayダッシュボードの「Logs」タブを開く
   - エラーメッセージを確認

2. **アプリケーションの状態を確認**
   - 「Deployments」タブで最新のデプロイメントを確認
   - ステータスが「Active」になっているか確認

3. **環境変数を確認**
   - `APP_ENV=production`が設定されているか
   - `APP_DEBUG=false`が設定されているか
   - その他の必須環境変数が設定されているか

4. **手動でエンドポイントをテスト**
   - アプリケーションのURLに直接アクセス
   - `https://your-app.railway.app/up`にアクセス
   - `https://your-app.railway.app/health`にアクセス

## よくある問題

### 問題1: アプリケーションが起動していない

**原因**: 起動コマンドでエラーが発生している

**解決**: ログを確認してエラーを修正

### 問題2: ポートが正しく設定されていない

**原因**: `$PORT`環境変数が正しく設定されていない

**解決**: Railwayが自動的に設定しますが、確認が必要な場合があります

### 問題3: データベース接続エラーで起動に失敗

**原因**: データベース接続情報が正しく設定されていない

**解決**: 環境変数を確認して修正

